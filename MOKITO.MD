<head><title>Курс JSP &amp; Servlets - Лекция: Основные аннотации Mockito</title>
<meta tag="meta" content="text/html; charset=UTF-8" http-equiv="Content-Type"><meta content="width=device-width, initial-scale=1, user-scalable=no" name="viewport"><link href="data:text/css;charset=UTF-8,html%2Cbody%7Bmargin%3A0%3Bpadding%3A0%3Bfont-family%3A%27Segoe%20UI%27%2CDejaVu%20Sans%2CArial%2Csans-serif%3Bfont-size%3A15px%7Dbody%7Bpadding-top%3A36px%3Bpadding-bottom%3A72px%3Bcolor%3A%232e2e2e%3Bbackground%3A%23f7f7f7%7Dbody%5Btheme%3D%27sepia%27%5D%7Bbackground%3A%23f5efdd%7Dbody%5Btheme%3D%27black%27%5D%7Bcolor%3Argba%28255%2C255%2C255%2C0.8%29%3Bbackground%3A%232c2b28%7Dbody%7B--keyboard-selected-frame-color%3Argba%280%2C0%2C255%2C0.45%29%3B--keyboard-selected-outline%3A2px%20solid%20var%28--keyboard-selected-frame-color%29%3B--readability-control-item-hover-color%3Argba%280%2C0%2C0%2C0.08%29%3B--readability-control-item-active-color%3Argba%280%2C0%2C0%2C0.16%29%3B--readability-control-item-selected-color%3Argba%280%2C0%2C0%2C0.75%29%7Dbody%5Btheme%3D%27black%27%5D%7B--keyboard-selected-frame-color%3Argba%28255%2C128%2C0%2C0.45%29%3B--readability-control-item-hover-color%3Argba%28255%2C255%2C255%2C0.08%29%3B--readability-control-item-active-color%3Argba%28255%2C255%2C255%2C0.16%29%3B--readability-control-item-selected-color%3Argba%28255%2C255%2C255%2C0.75%29%3B--readability-control-color%3A%23fff%7D.keyboard-selected%7Boutline%3Avar%28--keyboard-selected-outline%29%20%21important%7D%23close-button%7Bposition%3Afixed%3Bz-index%3A11%3Btop%3A4px%3Bright%3A7px%3Bdisplay%3Aflex%3Bwidth%3A40px%3Bheight%3A40px%3Bpadding%3A0%3Btransition%3Abackground-color%20.25s%3Bborder%3A0%3Boutline%3A0%3Bbackground%3A0%3Bjustify-content%3Acenter%3Balign-items%3Acenter%7D%23close-button%3Ahover%7Bbackground-color%3Avar%28--readability-control-item-hover-color%29%7D%23close-button%3Aactive%7Bbackground-color%3Avar%28--readability-control-item-active-color%29%7D%23close-button%5Bdisabled%5D%7Bopacity%3A.24%7D%23close-button%20span%7Bwidth%3A16px%3Bheight%3A16px%3Btransform%3Arotate%2845deg%29%3Bbackground-color%3Avar%28--readability-control-color%2C%23000%29%3B-webkit-mask-image%3Aurl%28data%3Aimage/svg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZyBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS13aWR0aDoxO3N0cm9rZTpub25lIj48ZyBmaWxsPSIjMDAwIj48cGF0aCBkPSJNNy42IDcuNkwwIDcuNiAwIDguNSA3LjYgOC41IDcuNiAxNiA4LjQgMTYgOC40IDguNSAxNiA4LjUgMTYgNy42IDguNCA3LjYgOC40IDAgNy42IDAgNy42IDcuNloiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%29%7D%23toolbar%7Bposition%3Afixed%3Bz-index%3A10%3Btop%3A0%3Bdisplay%3Aflex%3Bflex-direction%3Arow%3Bwidth%3A100%25%3Bheight%3A48px%3Bpadding-left%3A7px%3Btransition%3Atransform%20.25s%20linear%3Bborder-bottom%3A1px%20solid%20rgba%280%2C0%2C0%2C0.12%29%3Bbackground%3A%23f7f7f7%3Bfont-size%3A15px%3B--bro-select-transition%3Aborder-color%20.25s%3Bjustify-content%3Aflex-start%3Balign-items%3Acenter%7D%23toolbar.hidden%7Btransform%3AtranslateY%28-49px%29%7Dbody%5Btheme%3D%27sepia%27%5D%20%23toolbar%7Bbackground%3A%23f5efdd%7Dbody%5Btheme%3D%27black%27%5D%20%23toolbar%7Bborder-bottom-color%3Argba%28255%2C255%2C255%2C0.12%29%3Bbackground%3A%232c2b28%3B--bro-select-arrow-color%3A%23fff%3B--bro-select-border-color%3A%23838484%3B--bro-select-hover-border-color%3A%23fff%7D%40media%20print%7B%23toolbar%7Bdisplay%3Anone%7D%7D%23toolbar%20%23size-controls%7Bdisplay%3Aflex%3Bflex-direction%3Arow%3Bjustify-content%3Aflex-start%3Balign-items%3Acenter%7D%23toolbar%20%23size-controls%20button%7Bdisplay%3Aflex%3Bwidth%3A40px%3Bheight%3A40px%3Bpadding%3A0%3Btransition%3Abackground-color%20.25s%3Bborder%3A0%3Boutline%3A0%3Bbackground%3A0%3Bjustify-content%3Acenter%3Balign-items%3Acenter%7D%23toolbar%20%23size-controls%20button%3Ahover%7Bbackground-color%3Avar%28--readability-control-item-hover-color%29%7D%23toolbar%20%23size-controls%20button%3Aactive%7Bbackground-color%3Avar%28--readability-control-item-active-color%29%7D%23toolbar%20%23size-controls%20button%5Bdisabled%5D%7Bopacity%3A.24%7D%23toolbar%20%23size-controls%20button%20span%7Bwidth%3A16px%3Bheight%3A16px%3Bbackground-color%3Avar%28--readability-control-color%2C%23000%29%7D%23toolbar%20%23size-controls%20%23size-button-plus%20span%7B-webkit-mask-image%3Aurl%28data%3Aimage/svg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij48ZyBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS13aWR0aDoxO3N0cm9rZTpub25lIj48ZyBmaWxsPSIjMDAwIj48cGF0aCBkPSJNNy42IDcuNkwwIDcuNiAwIDguNSA3LjYgOC41IDcuNiAxNiA4LjQgMTYgOC40IDguNSAxNiA4LjUgMTYgNy42IDguNCA3LjYgOC40IDAgNy42IDAgNy42IDcuNloiLz48L2c%2BPC9nPjwvc3ZnPg%3D%3D%29%7D%23toolbar%20%23size-controls%20%23size-button-minus%20span%7Bheight%3A2px%3B-webkit-mask-image%3Aurl%28data%3Aimage/svg%2Bxml%3Bbase64%2CPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyIiB2aWV3Qm94PSIwIDAgMTcgMiI%2BPGcgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2U6bm9uZSI%2BPGcgZmlsbD0iIzAwMCI%2BPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxIi8%2BPC9nPjwvZz48L3N2Zz4%3D%29%7D%23toolbar%20%23theme-controls%7Bdisplay%3Aflex%3Bflex-direction%3Arow%3Bmargin-left%3A24px%3Balign-items%3Acenter%7D%23toolbar%20%23theme-buttons%7Bdisplay%3Aflex%3Bflex-direction%3Arow%3Bwidth%3A98px%3Bmargin-left%3A7px%3Bjustify-content%3Aspace-between%3Balign-items%3Acenter%7D%23toolbar%20%23theme-buttons%20input%5Btype%3D%27radio%27%5D%7Bdisplay%3Anone%7D%23toolbar%20%23theme-buttons%20label%7Bdisplay%3Ablock%3Bbox-sizing%3Acontent-box%3Bwidth%3A24px%3Bheight%3A24px%3Bpadding%3A0%3Btransition%3Aborder-color%20.25s%3Bborder%3A3px%20solid%20transparent%3Bborder-radius%3A50%25%3Boutline%3A0%3Bbackground-clip%3Acontent-box%7D%23toolbar%20%23theme-buttons%20input%5Btype%3D%27radio%27%5D%3Anot%28%3Achecked%29%2Blabel%3Anot%28%3Ahover%29%7Bmargin%3A0%202px%3Bborder%3A1px%20solid%20rgba%280%2C0%2C0%2C0.12%29%7D%23toolbar%20%23theme-buttons%20label%3Ahover%7Bborder-color%3Avar%28--readability-control-item-hover-color%29%7D%23toolbar%20%23theme-buttons%20label%3Aactive%7Bborder-color%3Avar%28--readability-control-item-active-color%29%7D%23toolbar%20%23theme-buttons%20input%5Btype%3D%27radio%27%5D%3Achecked%2Blabel%7Bborder-color%3Avar%28--readability-control-item-selected-color%29%7D%23toolbar%20%23theme-radio-white-label%7Bbackground-color%3A%23ededed%7D%23toolbar%20%23theme-radio-sepia-label%7Bbackground-color%3A%23ddd7ca%7D%23toolbar%20%23theme-radio-black-label%7Bbackground-color%3A%23484848%7D%23toolbar%20%23font-controls%7Bdisplay%3Aflex%3Bflex-direction%3Arow%3Bmargin-left%3A33px%3Bjustify-content%3Aflex-start%3Balign-items%3Acenter%7D%23toolbar%20%23font-caption%7Bmargin-right%3A7px%7D%23toolbar%20%23font-select%7Bposition%3Arelative%3Bdisplay%3Aflex%3Bflex-direction%3Arow%3Bbox-sizing%3Aborder-box%3Bwidth%3A230px%3Bheight%3A32px%3Bcursor%3Adefault%3B-webkit-user-select%3Anone%3Buser-select%3Anone%3Btransition%3Aborder-color%20.25s%3Bborder%3A1px%20solid%20var%28--bro-select-border-color%2C%237a7b7b%29%3Boutline%3A0%7D%23toolbar%20%23font-select%3Ahover%7Bborder-color%3Avar%28--bro-select-hover-border-color%2C%23202020%29%7D%23toolbar%20%23font-select-caption%7Bbox-sizing%3Aborder-box%3Bwidth%3Acalc%28100%25%20-%2032px%29%3Bpadding%3A5px%2012px%200%2012px%7D%23toolbar%20%23font-select-arrow%7Bdisplay%3Aflex%3Bwidth%3A32px%3Bjustify-content%3Acenter%3Balign-items%3Acenter%3Bflex-shrink%3A0%3Bflex-grow%3A0%7D%23toolbar%20%23font-select-arrow%20span%7Bwidth%3A12px%3Bheight%3A8px%3Bbackground%3Avar%28--bro-select-arrow-color%2C%23000%29%3B-webkit-mask-image%3Aurl%28data%3Aimage/svg%2Bxml%3Bbase64%2CPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8%2BPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCAxMiA4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgICAgICAgPHRpdGxlPkZpbGwgMzwvdGl0bGU%2BICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM%2BICAgIDxnIGlkPSJTeW1ib2xzIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJJbnB1dC1jb21iby1ib3giIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMTQuMDAwMDAwLCAtMzkuMDAwMDAwKSIgZmlsbD0iIzMzMzQzMyI%2BICAgICAgICAgICAgPHBvbHlsaW5lIGlkPSJGaWxsLTMiIHBvaW50cz0iMzI1LjMyNSAzOS44NTMgMzE5Ljk2NCA0NS4yMTUgMzE0LjYwMyAzOS44NTMgMzE0LjA3NiA0MC4zODEgMzE5Ljk2NCA0Ni4yNjkgMzI1Ljg1MiA0MC4zODEgMzI1LjMyNSAzOS44NTMiPjwvcG9seWxpbmU%2BICAgICAgICA8L2c%2BICAgIDwvZz48L3N2Zz4%3D%29%7D%23toolbar%20%23font-select-dropdown%7Bposition%3Aabsolute%3Bz-index%3A2147483647%3Btop%3A-8px%3Bleft%3A-1px%3Bdisplay%3Aflex%3Bwidth%3A100%25%3Bpadding%3A7px%200%3Btransition%3Aborder-color%20.25s%3Bcolor%3A%23000%3Bborder%3A1px%20solid%20var%28--bro-select-border-color%2C%237a7b7b%29%3Bbackground%3A%23f2f2f2%3Bflex-flow%3Acolumn%7D%23toolbar%20%23font-select%3Anot%28%5Bopen%5D%29%20%23font-select-dropdown%7Bdisplay%3Anone%7D%23toolbar%20%23font-select%3Ahover%20%23font-select-dropdown%7Bborder-color%3Avar%28--bro-select-hover-border-color%2C%23202020%29%7D%23toolbar%20%23font-select-dropdown%20input%7Bdisplay%3Anone%7D%23toolbar%20%23font-select-dropdown%20label%7Bdisplay%3Ablock%3Bbox-sizing%3Aborder-box%3Bwidth%3A100%25%3Bheight%3A32px%3Bpadding%3A5px%2012px%200%2012px%3Boutline%3A0%7D%23toolbar%20%23font-select-dropdown%20label%3Ahover%7Bbackground%3Argba%280%2C0%2C0%2C0.16%29%7D%23toolbar%20%23font-select-dropdown%20label%3Aactive%7Bbackground%3Argba%280%2C0%2C0%2C0.37%29%7D%23toolbar%20%23font-select-dropdown%20input%3Achecked%2Blabel%7Bbackground%3Argba%28255%2C204%2C0%2C0.42%29%7D%23toolbar%20%23font-select-dropdown%20input%3Achecked%2Blabel%3Ahover%7Bbackground%3Argba%28255%2C204%2C0%2C0.64%29%7D%23toolbar%20%23font-select-dropdown%20input%3Achecked%2Blabel%3Aactive%7Bbackground%3Argba%28255%2C204%2C0%2C0.82%29%7D%23readability-debug-area%7Bposition%3Afixed%3Bbottom%3A0%3Bleft%3A0%3Bwidth%3A100%25%3Bheight%3A300px%7Dbody%3Anot%28%5Bdebug%5D%29%20%23readability-debug-area%7Bdisplay%3Anone%7Dbody%3E%23reader-header%2Cbody%3E%23reader-content%7Bwidth%3A658px%3Bmargin%3A0%20auto%3Bfont-family%3A%27Georgia%27%2C%27Times%20New%20Roman%27%2Cserif%7Dbody%5Bfont%3D%27arial%27%5D%3E%23reader-header%2Cbody%5Bfont%3D%27arial%27%5D%3E%23reader-content%7Bfont-family%3AArial%2CTahoma%2CVerdana%2Csans-serif%7Dbody%5Bis-macos%5D%5Bfont%3D%27arial%27%5D%3E%23reader-header%2Cbody%5Bis-macos%5D%5Bfont%3D%27arial%27%5D%3E%23reader-content%7Bfont-family%3Asans-serif%2CArial%2CTahoma%2CVerdana%7D%40media%20screen%20and%20%28min-width%3A1218px%29%7Bbody%3E%23reader-header%2Cbody%3E%23reader-content%7Bwidth%3A54%25%7D%7D%40media%20screen%20and%20%28min-width%3A1316px%29%7Bbody%5Bsize%3D%27-1%27%5D%3E%23reader-header%2Cbody%5Bsize%3D%27-1%27%5D%3E%23reader-content%7Bwidth%3A50%25%7D%7D%40media%20screen%20and%20%28min-width%3A1134px%29%7Bbody%5Bsize%3D%271%27%5D%3E%23reader-header%2Cbody%5Bsize%3D%271%27%5D%3E%23reader-content%7Bwidth%3A58%25%7D%7D%40media%20screen%20and%20%28min-width%3A1028px%29%7Bbody%5Bsize%3D%272%27%5D%3E%23reader-header%2Cbody%5Bsize%3D%272%27%5D%3E%23reader-content%7Bwidth%3A64%25%7D%7D%40media%20screen%20and%20%28min-width%3A913px%29%7Bbody%5Bsize%3D%273%27%5D%3E%23reader-header%2Cbody%5Bsize%3D%273%27%5D%3E%23reader-content%7Bwidth%3A72%25%7D%7D%40media%20screen%20and%20%28max-width%3A700px%29%7Bbody%3E%23reader-header%2Cbody%3E%23reader-content%7Bwidth%3A94%25%7D%7Dbody%3E%23reader-header%20h1%2Cbody%3E%23reader-content%20h1%2Cbody%3E%23reader-header%20h2%2Cbody%3E%23reader-content%20h2%2Cbody%3E%23reader-header%20h3%2Cbody%3E%23reader-content%20h3%2Cbody%3E%23reader-header%20h4%2Cbody%3E%23reader-content%20h4%2Cbody%3E%23reader-header%20h5%2Cbody%3E%23reader-content%20h5%2Cbody%3E%23reader-header%20h6%2Cbody%3E%23reader-content%20h6%7Bfont-size%3A20px%3Bline-height%3A1.4em%7Dbody%3E%23reader-header%20h1%2Cbody%3E%23reader-content%20h1%7Bmargin%3A1.2em%200%20.7em%200%3Bfont-size%3A30px%3Bfont-weight%3Anormal%7Dbody%5Bis-macos%5D%5Bfont%3D%27arial%27%5D%3E%23reader-header%20h1%2Cbody%5Bis-macos%5D%5Bfont%3D%27arial%27%5D%3E%23reader-content%20h1%7Bfont-weight%3Abold%7Dbody%5Bsize%3D%271%27%5D%3E%23reader-header%20h1%2Cbody%5Bsize%3D%271%27%5D%3E%23reader-content%20h1%7Bfont-size%3A32px%7Dbody%5Bsize%3D%272%27%5D%3E%23reader-header%20h1%2Cbody%5Bsize%3D%272%27%5D%3E%23reader-content%20h1%7Bfont-size%3A36px%7Dbody%5Bsize%3D%273%27%5D%3E%23reader-header%20h1%2Cbody%5Bsize%3D%273%27%5D%3E%23reader-content%20h1%7Bfont-size%3A42px%7Dbody%5Bsize%3D%27-1%27%5D%3E%23reader-header%20h1%2Cbody%5Bsize%3D%27-1%27%5D%3E%23reader-content%20h1%7Bfont-size%3A26px%7Dbody%3E%23reader-header%20h2%2Cbody%3E%23reader-content%20h2%7Bmargin%3A1.6em%200%20.5em%200%3Bfont-size%3A26px%3Bfont-weight%3Anormal%3Bline-height%3A1.4em%7Dbody%3E%23reader-header%20h2%2Bp%2Cbody%3E%23reader-content%20h2%2Bp%7Bmargin-top%3A0%7Dbody%5Bsize%3D%271%27%5D%3E%23reader-header%20h2%2Cbody%5Bsize%3D%271%27%5D%3E%23reader-content%20h2%7Bfont-size%3A28px%7Dbody%5Bsize%3D%272%27%5D%3E%23reader-header%20h2%2Cbody%5Bsize%3D%272%27%5D%3E%23reader-content%20h2%7Bfont-size%3A32px%7Dbody%5Bsize%3D%273%27%5D%3E%23reader-header%20h2%2Cbody%5Bsize%3D%273%27%5D%3E%23reader-content%20h2%7Bfont-size%3A36px%7Dbody%5Bsize%3D%27-1%27%5D%3E%23reader-header%20h2%2Cbody%5Bsize%3D%27-1%27%5D%3E%23reader-content%20h2%7Bfont-size%3A22px%7Dbody%3E%23reader-header%20h3%2Cbody%3E%23reader-content%20h3%2Cbody%3E%23reader-header%20h4%2Cbody%3E%23reader-content%20h4%2Cbody%3E%23reader-header%20h5%2Cbody%3E%23reader-content%20h6%7Bmargin%3A2em%200%20.6em%200%3Bfont-weight%3Abold%7Dbody%5Bsize%3D%27-1%27%5D%3E%23reader-header%20h3%2Cbody%5Bsize%3D%27-1%27%5D%3E%23reader-content%20h3%7Bmargin%3A2em%200%20.9em%200%7Dbody%3E%23reader-header%20.credits%7Bmargin%3A0%3Bopacity%3A.5%3Bfont-size%3A15px%3Bline-height%3A1.5em%7Dbody%3E%23reader-header%20.credits%3Aempty%7Bdisplay%3Anone%7Dbody%5Bsize%3D%271%27%5D%3E%23reader-header%20.credits%7Bfont-size%3A18px%7Dbody%5Bsize%3D%272%27%5D%3E%23reader-header%20.credits%7Bfont-size%3A20px%7Dbody%5Bsize%3D%273%27%5D%3E%23reader-header%20.credits%7Bfont-size%3A24px%7Dbody%5Bsize%3D%27-1%27%5D%3E%23reader-header%20.credits%7Bfont-size%3A12px%7Dbody%3E%23reader-content%7Bfont-size%3A20px%3Bline-height%3A1.5em%7Dbody%5Bsize%3D%271%27%5D%3E%23reader-content%7Bfont-size%3A22px%7Dbody%5Bsize%3D%272%27%5D%3E%23reader-content%7Bfont-size%3A26px%7Dbody%5Bsize%3D%273%27%5D%3E%23reader-content%7Bfont-size%3A32px%7Dbody%5Bsize%3D%27-1%27%5D%3E%23reader-content%7Bfont-size%3A16px%3Bline-height%3A1.6%7Dbody%3E%23reader-content%20a%7Btext-decoration%3Anone%20%21important%3Bfont-weight%3Anormal%7Dbody%3E%23reader-content%20a%2Cbody%3E%23reader-content%20a%3Avisited%2Cbody%3E%23reader-content%20a%3Ahover%2Cbody%3E%23reader-content%20a%3Aactive%7Bcolor%3A%230075da%20%21important%7Dbody%3E%23reader-content%20img%7Bmax-width%3A100%25%3Bheight%3Aauto%3Bmargin%3A26px%20auto%2016px%20auto%7Dbody%5Bsize%3D%271%27%5D%3E%23reader-content%20img%7Bmargin%3A42px%200%2018px%200%7Dbody%5Bsize%3D%272%27%5D%3E%23reader-content%20img%7Bmargin%3A44px%200%2020px%200%7Dbody%5Bsize%3D%273%27%5D%3E%23reader-content%20img%7Bmargin%3A44px%200%2020px%200%7Dbody%3E%23reader-content%20p%7Bmargin%3A1em%200%201em%200%7Dbody%3E%23reader-content%20blockquote%7Bmargin%3A1em%200%201em%200%3Bfont-size%3A30px%3Bline-height%3A1.4em%7Dbody%5Bsize%3D%271%27%5D%3E%23reader-content%20blockquote%7Bfont-size%3A32px%7Dbody%5Bsize%3D%272%27%5D%3E%23reader-content%20blockquote%7Bfont-size%3A36px%7Dbody%5Bsize%3D%273%27%5D%3E%23reader-content%20blockquote%7Bfont-size%3A42px%7Dbody%5Bsize%3D%27-1%27%5D%3E%23reader-content%20blockquote%7Bfont-size%3A26px%7Dbody%3E%23reader-content%20ul%2Cbody%3E%23reader-content%20ol%7Bmargin%3A0%7Dbody%3E%23reader-content%20li%7Bmargin%3A.2em%200%20.2em%200%7Dbody%3E%23reader-content%20code%2Cbody%3E%23reader-content%20pre%7Bmargin%3A0%200%2020px%200%20%21important%3Bwhite-space%3Apre-wrap%20%21important%7D" rel="stylesheet" type="text/css"></head><body><button id="close-button"><span></span></button><div id="toolbar"><div id="size-controls"><button id="size-button-plus"><span></span></button><button id="size-button-minus"><span></span></button></div><div id="theme-controls"><div id="theme-caption">Фон</div><div id="theme-buttons"><input id="theme-radio-white" name="theme-radio" type="radio" value="white" checked="checked"><label for="theme-radio-white" tabindex="0" id="theme-radio-white-label"></label><input id="theme-radio-sepia" name="theme-radio" type="radio" value="sepia"><label for="theme-radio-sepia" tabindex="0" id="theme-radio-sepia-label"></label><input id="theme-radio-black" name="theme-radio" type="radio" value="black"><label for="theme-radio-black" tabindex="0" id="theme-radio-black-label"></label></div></div><div id="font-controls"><div id="font-caption">Шрифт</div><div id="font-select" tabindex="0"><div id="font-select-caption"></div><div id="font-select-arrow"><span></span></div><div id="font-select-dropdown"><input id="font-radio-georgia" name="font-radio" type="radio" value="georgia" checked="checked"><label for="font-radio-georgia" tabindex="0" id="font-radio-georgia-label">Georgia</label><input id="font-radio-arial" name="font-radio" type="radio" value="arial"><label for="font-radio-arial" tabindex="0" id="font-radio-arial-label">Arial</label></div></div></div></div><div id="reader-header" class="header"><h1 id="reader-title">Курс JSP &amp; Servlets - Лекция: Основные аннотации Mockito</h1><div id="reader-credits" class="credits">Начать Начать обучение</div></div><div id="reader-content" class="content"><div id="readability-page-1" class="page"><div slot="content"><h2>2.1 Аннотация @Mock</h2>
<p>Есть два способа работы с мок-объектами в Mockito. Первый – это <strong>создать полностью виртуальный объект</strong>, второй – это <strong>обернуть существующий объект</strong> в некую обертку. Начнем с первого.</p>
<p>Чтобы создать полностью виртуальный объект, нужно написать код:</p>
 <div>
    <pre><code><span>ИмяКласса</span> <span>имяПеременной</span> = <span>Mockito</span>.<span>mock</span>(<span>ИмяКласса</span>.class);</code></pre>
</div>
<p>Давайте ради примера создадим мок класса ArrayList:</p>
<pre tabindex="0"><code><span>@ExtendWith</span><span>(</span><span>MockitoExtension</span><span>.</span><span>class</span><span>)</span>
<span>class</span> <span>MockTest</span> <span>{</span>
<span>    <span>@Test</span></span><span></span>
    <span>public</span> <span>void</span> <span>whenNotUseMockAnnotation_thenCorrect</span><span>(</span><span>)</span> <span>{</span>
<span>        <span>List</span></span><span></span><span> mockList</span> <span>=</span> <span><span>Mockito</span></span><span>.</span><span><span>mock</span></span><span>(</span><span><span>ArrayList</span></span><span>.</span><span>class</span><span>)</span><span>;</span>
        <span>//эти методы не будут ничего делать – это заглушки</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"one"</span><span>)</span><span>;</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"two"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span></code></pre>
<p>В этом примере мы создаем фейковый объект типа ArrayList и сохраняем ссылку на него в переменную mockList. Методы этого объекта ничего не делают.</p>
<p>Кстати, этот код можно записать еще короче, так как для этого есть специальная аннотация <code>@Mock</code>.</p>
<pre tabindex="0"><code><span>@ExtendWith</span><span>(</span><span>MockitoExtension</span><span>.</span><span>class</span><span>)</span>
<span>class</span> <span>MockTest</span> <span>{</span>
<span>    <span>@Mock</span></span><span></span>
<span>    <span>List</span> mockList<span>;</span></span><span></span>

<span>    <span>@Test</span></span><span></span>
    <span>public</span> <span>void</span> <span>whenNotUseMockAnnotation_thenCorrect</span><span>(</span><span>)</span> <span>{</span>
        <span>//эти методы не будут ничего делать – это заглушки</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"one"</span><span>)</span><span>;</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"two"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span></code></pre>
<p>Во втором случае <code><span>MockitoExtension</span></code> сам проанализирует код класса и создаст нужные заглушки. Вызывать метод <code>Mockito.mock()</code> не нужно. Одна аннотация и виртуальный объект готов. Красота.</p>
<h2>2.2 Аннотация @Spy</h2>
<p>Второй важный тип объектов в Mockito – это обертки над существующими объектами. Они позволяют с одной стороны пользоваться уже существующими классами, а с другой – перехватывать обращение ко всем методам и переменным таких объектов: подкорректировать их работу, где это нужно. Используются так же часто, как и Mock-объекты.</p>
<p>Чтобы создать обертку над объектом, нужно написать код:</p>
 <div>
    <pre><code><span>ИмяКласса</span> <span>имяПеременной</span> = <span>Mockito</span>.<span>spy</span>(<span>объект</span>);</code></pre>
</div>
<p>Пример с оберткой вокруг класса ArrayList:</p>
<pre tabindex="0"><code><span>@ExtendWith</span><span>(</span><span>MockitoExtension</span><span>.</span><span>class</span><span>)</span>
<span>class</span> <span>SpyTest</span> <span>{</span>
<span>    <span>@Test</span></span><span></span>
    <span>public</span> <span>void</span> <span>whenMockAnnotation</span><span>(</span><span>)</span> <span>{</span>
<span>        <span>List</span><span><span>&lt;</span><span>String</span><span>&gt;</span></span> <span>mockList</span> <span>=</span> <span><span>Mockito</span></span><span>.</span><span><span>spy</span></span><span>(</span><span></span><span><span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>String</span><span>&gt;</span></span><span>(</span><span>)</span></span><span></span><span>)</span><span>;</span>
        <span>//эти методы будут работать!</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"one"</span><span>)</span><span>;</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"two"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span>
</span></code></pre>
<p>В самом простом варианте обращение к <span>объекту-обертке просто перенаправляет вызовы к оригинальному объекту, ссылку на который он хранит у себя внутри</span>. Все будет работать, как и с оригинальным объектом.</p>
<p>Создать обертку так же можно с помощью аннотации – <code>@Spy</code>.</p>
<pre tabindex="0"><code><span>@ExtendWith</span><span>(</span><span>MockitoExtension</span><span>.</span><span>class</span><span>)</span>
<span>class</span> <span>SpyTest</span> <span>{</span>
<span>    <span>@Spy</span></span><span></span>
<span>    <span>List</span> mockList <span>=</span></span><span></span><span> <span>new</span> <span>ArrayList</span><span><span>&lt;</span><span>String</span><span>&gt;</span></span><span>(</span><span>)</span><span>;</span></span><span></span>

<span>    <span>@Test</span></span><span></span>
    <span>public</span> <span>void</span> <span>whenMockAnnotation</span><span>(</span><span>)</span> <span>{</span>
        <span>// эти методы будут работать!</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"one"</span><span>)</span><span>;</span>
<span>        mockList</span><span>.</span><span>add</span><span>(</span><span>"two"</span><span>)</span><span>;</span>
    <span>}</span>
<span>}</span></code></pre>
<p>Эти два примера кода эквиваленты.</p>
</div></div></div><textarea id="readability-debug-area"></textarea><script src="data:text/javascript;base64,Ly8gQ29weXJpZ2h0IChjKSAyMDE2IFlhbmRleCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCi8vIEF1dGhvcjogRG1pdHJ5IEd1a2V0bGV2IDx5YXZhbm9zdGFAeWFuZGV4LXRlYW0ucnU+CgooZnVuY3Rpb24oKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICAvKioKICAgKiBPdmVycmlkZSBtZSBmb3IgZGVidWcgbW9kZS4KICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgKi8KICBjb25zdCBERUJVRyA9IGZhbHNlOwoKICBmdW5jdGlvbiBsb2coKSB7CiAgICBpZiAoIURFQlVHKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb25zdCBhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlYWRhYmlsaXR5LWRlYnVnLWFyZWEnKTsKICAgIGFyZWEudmFsdWUgKz0KICAgICAgICAnXG4nICsgQXJyYXkuZnJvbShhcmd1bWVudHMpLm1hcChhID0+IGEudG9TdHJpbmcoKSkuam9pbignLCAnKTsKICAgIGFyZWEuc2Nyb2xsVG9wID0gYXJlYS5zY3JvbGxIZWlnaHQ7CiAgfQoKICBmdW5jdGlvbiBhZGRMaXN0ZW5lcnNGb3JNb3VzZWxlc3MoKSB7CiAgICBsb2coJ0VudGVyIGFkZExpc3RlbmVyc0Zvck1vdXNlbGVzcycpOwoKICAgIGNvbnN0IFNFTEVDVEVEX0NMQVNTID0gJ2tleWJvYXJkLXNlbGVjdGVkJzsKCiAgICAvLyBJZiBlbGVtZW50IGhhcyBkZWZhdWx0IGFjdGlvbiBvbiAnRW50ZXInIGtleSwgdGhlcmUgaXMgbm8gbmVlZCB0byBoYW5kbGUKICAgIC8vIGl0IGJ5IG91cnNlbHZlcy4KICAgIGNvbnN0IGl0ZW1zV2l0aERlZmF1bHRBY3Rpb24gPSBuZXcgU2V0KFsKICAgICAgJ2EnLAogICAgICAnYnV0dG9uJywKICAgICAgJ2lucHV0JywKICAgICAgJ3RleHRhcmVhJywKICAgIF0pOwoKICAgIC8qKgogICAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudAogICAgICovCiAgICBmdW5jdGlvbiBoYW5kbGVLZXlVcChldmVudCkgewogICAgICBsb2coJ2FkZExpc3RlbmVyc0Zvck1vdXNlbGVzcyAtPiBoYW5kbGVLZXlVcCcpOwoKICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKCiAgICAgIGlmIChldmVudC5rZXkgIT0gJ1RhYicpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChhY3RpdmVFbGVtZW50ID09IGRvY3VtZW50LmJvZHkpIHsKICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWN0aXZlRWxlbWVudCA9ICQoJ1t0YWJpbmRleD0iMCJdJyk7CiAgICAgICAgICBhY3RpdmVFbGVtZW50LmZvY3VzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBhY3RpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoU0VMRUNURURfQ0xBU1MpOwogICAgfQoKICAgIC8qKgogICAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudAogICAgICovCiAgICBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50KSB7CiAgICAgIGxvZygnYWRkTGlzdGVuZXJzRm9yTW91c2VsZXNzIC0+IGhhbmRsZUtleURvd24nKTsKCiAgICAgIGNvbnN0IGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwoKICAgICAgaWYgKGV2ZW50LmtleSAhPSAnRW50ZXInIHx8CiAgICAgICAgICAhYWN0aXZlRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoU0VMRUNURURfQ0xBU1MpIHx8CiAgICAgICAgICBpdGVtc1dpdGhEZWZhdWx0QWN0aW9uLmhhcyhhY3RpdmVFbGVtZW50LmxvY2FsTmFtZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGFjdGl2ZUVsZW1lbnQuY2xpY2soKTsKICAgIH0KCiAgICAvKioKICAgICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnQKICAgICAqLwogICAgZnVuY3Rpb24gaGFuZGxlRm9jdXNPdXQoZXZlbnQpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JNb3VzZWxlc3MgLT4gaGFuZGxlRm9jdXNPdXQnKTsKCiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFNFTEVDVEVEX0NMQVNTKTsKICAgIH0KCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGhhbmRsZUtleVVwKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgaGFuZGxlRm9jdXNPdXQpOwoKICAgIGxvZygnQ29tcGxldGUgYWRkTGlzdGVuZXJzRm9yTW91c2VsZXNzJyk7CiAgfQoKICBmdW5jdGlvbiBhZGRMaXN0ZW5lcnNGb3JDbG9zZUJ1dHRvbigpIHsKICAgIGxvZygnRW50ZXIgYWRkTGlzdGVuZXJzRm9yQ2xvc2VCdXR0b24nKTsKCiAgICAvKioKICAgICAqIEB0eXBlIHtFbGVtZW50fQogICAgICovCiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZS1idXR0b24nKTsKCiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkgewogICAgICBsb2coJ2FkZExpc3RlbmVyc0ZvckNsb3NlQnV0dG9uIC0+IGNsb3NlIGNsaWNrJyk7CgogICAgICB5YW5kZXgucmVhZGFiaWxpdHkudG9nZ2xlKCk7CiAgICB9KTsKCiAgICBsb2coJ0NvbXBsZXRlIGFkZExpc3RlbmVyc0ZvckNsb3NlQnV0dG9uJyk7CiAgfQoKICBmdW5jdGlvbiBhZGRMaXN0ZW5lcnNGb3JUb29sYmFyVmlzaWJpbGl0eSgpIHsKICAgIGxvZygnRW50ZXIgYWRkTGlzdGVuZXJzRm9yVG9vbGJhclZpc2liaWxpdHknKTsKCiAgICAvKioKICAgICAqIEB0eXBlIHtFbGVtZW50fQogICAgICovCiAgICBjb25zdCBmb250U2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZvbnQtc2VsZWN0Jyk7CiAgICAvKioKICAgICAqIEB0eXBlIHtFbGVtZW50fQogICAgICovCiAgICBjb25zdCB0b29sYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Rvb2xiYXInKTsKCiAgICAvKioKICAgICAqIEB0eXBlIHtib29sZWFufQogICAgICovCiAgICBsZXQgbW91c2VMb2NrZWQgPSBmYWxzZTsKICAgIC8qKgogICAgICogQHR5cGUge2Jvb2xlYW59CiAgICAgKi8KICAgIGxldCBzY3JvbGxMb2NrZWQgPSB0cnVlOwogICAgLyoqCiAgICAgKiBAdHlwZSB7Ym9vbGVhbn0KICAgICAqLwogICAgbGV0IGZvY3VzTG9ja2VkID0gZmFsc2U7CiAgICAvKioKICAgICAqIEB0eXBlIHtib29sZWFufQogICAgICovCiAgICBsZXQgc2VsZWN0TG9ja2VkID0gZmFsc2U7CgogICAgZnVuY3Rpb24gdXBkYXRlVG9vbGJhclZpc2liaWxpdHkoKSB7CiAgICAgIGxvZygnYWRkTGlzdGVuZXJzRm9yVG9vbGJhclZpc2liaWxpdHkgLT4gdXBkYXRlVG9vbGJhclZpc2liaWxpdHknKTsKCiAgICAgIHRvb2xiYXIuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJywKICAgICAgICAgICEobW91c2VMb2NrZWQgfHwgc2Nyb2xsTG9ja2VkIHx8IGZvY3VzTG9ja2VkIHx8IHNlbGVjdExvY2tlZCkpOwogICAgfQoKICAgIGZvbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignb3BlbkNoYW5nZScsIGZ1bmN0aW9uKCkgewogICAgICBsb2coJ2FkZExpc3RlbmVyc0ZvclRvb2xiYXJWaXNpYmlsaXR5IC0+IGZvbnRTZWxlY3Qgb3BlbkNoYW5nZScpOwoKICAgICAgc2VsZWN0TG9ja2VkID0gZm9udFNlbGVjdC5oYXNBdHRyaWJ1dGUoJ29wZW4nKTsKICAgIH0pOwoKICAgIGxldCBmb2N1c1VwZGF0ZVRpbWVvdXQgPSBudWxsOwogICAgZnVuY3Rpb24gdXBkYXRlRm9jdXNMb2NrZWRTdGF0ZSgpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JUb29sYmFyVmlzaWJpbGl0eSAtPiB1cGRhdGVGb2N1c0xvY2tlZFN0YXRlJyk7CgogICAgICBpZiAoZm9jdXNMb2NrZWQpIHsKICAgICAgICBjbGVhclRpbWVvdXQoZm9jdXNVcGRhdGVUaW1lb3V0KTsKICAgICAgICBmb2N1c1VwZGF0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgZm9jdXNMb2NrZWQgPSAhIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5rZXlib2FyZC1zZWxlY3RlZCcpOwogICAgICAgICAgdXBkYXRlVG9vbGJhclZpc2liaWxpdHkoKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBmb2N1c0xvY2tlZCA9ICEhZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtleWJvYXJkLXNlbGVjdGVkJyk7CiAgICAgICAgdXBkYXRlVG9vbGJhclZpc2liaWxpdHkoKTsKICAgICAgfQogICAgfQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCB1cGRhdGVGb2N1c0xvY2tlZFN0YXRlKTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdXBkYXRlRm9jdXNMb2NrZWRTdGF0ZSk7CgogICAgbGV0IG1vdXNlVXBkYXRlVGltZW91dCA9IG51bGw7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JUb29sYmFyVmlzaWJpbGl0eSAtPiB3aW5kb3cgbW91c2Vtb3ZlJyk7CgogICAgICBtb3VzZUxvY2tlZCA9IGV2ZW50LnkgPCA0OCAqIDI7CgogICAgICBpZiAobW91c2VMb2NrZWQpIHsKICAgICAgICBjbGVhclRpbWVvdXQobW91c2VVcGRhdGVUaW1lb3V0KTsKICAgICAgICBtb3VzZVVwZGF0ZVRpbWVvdXQgPSBudWxsOwogICAgICAgIHVwZGF0ZVRvb2xiYXJWaXNpYmlsaXR5KCk7CiAgICAgIH0gZWxzZSBpZiAobW91c2VVcGRhdGVUaW1lb3V0ID09PSBudWxsKSB7CiAgICAgICAgbW91c2VVcGRhdGVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgIG1vdXNlVXBkYXRlVGltZW91dCA9IG51bGw7CiAgICAgICAgICB1cGRhdGVUb29sYmFyVmlzaWJpbGl0eSgpOwogICAgICAgIH0sIDMwMCk7CiAgICAgIH0KICAgIH0pOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmdW5jdGlvbigpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JUb29sYmFyVmlzaWJpbGl0eSAtPiB3aW5kb3cgc2Nyb2xsJyk7CgogICAgICBzY3JvbGxMb2NrZWQgPSAod2luZG93LnNjcm9sbFkgPT09IDAgfHwKICAgICAgICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0IDw9ICh3aW5kb3cuc2Nyb2xsWSArIHdpbmRvdy5pbm5lckhlaWdodCkpOwogICAgICB1cGRhdGVUb29sYmFyVmlzaWJpbGl0eSgpOwogICAgfSwge3Bhc3NpdmU6IHRydWV9KTsKCiAgICBsb2coJ0NvbXBsZXRlIGFkZExpc3RlbmVyc0ZvclRvb2xiYXJWaXNpYmlsaXR5Jyk7CiAgfQoKICBmdW5jdGlvbiBhZGRMaXN0ZW5lcnNGb3JQYWdlU2l6ZShpbml0aWFsU2l6ZSkgewogICAgbG9nKCdFbnRlciBhZGRMaXN0ZW5lcnNGb3JQYWdlU2l6ZSB3aXRoIGluaXRpYWwgc2l6ZTogJyArIGluaXRpYWxTaXplKTsKCiAgICAvKioKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGNvbnN0IE1BWF9TSVpFID0gMzsKCiAgICAvKioKICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgKi8KICAgIGNvbnN0IE1JTl9TSVpFID0gLTE7CgogICAgLyoqCiAgICAgKiBAdHlwZSB7SFRNTEJ1dHRvbkVsZW1lbnR9CiAgICAgKi8KICAgIGNvbnN0IHBsdXNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2l6ZS1idXR0b24tcGx1cycpOwogICAgLyoqCiAgICAgKiBAdHlwZSB7SFRNTEJ1dHRvbkVsZW1lbnR9CiAgICAgKi8KICAgIGNvbnN0IG1pbnVzQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpemUtYnV0dG9uLW1pbnVzJyk7CgogICAgLyoqCiAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICovCiAgICBsZXQgc2l6ZSA9IGluaXRpYWxTaXplOwoKICAgIGZ1bmN0aW9uIHVwZGF0ZUF0dHJpYnV0ZUFuZERpc2FibGVTaXplQnV0dG9ucygpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JQYWdlU2l6ZSAtPiB1cGRhdGVBdHRyaWJ1dGVBbmREaXNhYmxlU2l6ZUJ1dHRvbnMnKTsKCiAgICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdzaXplJywgc2l6ZSk7CiAgICAgIHlhbmRleC5yZWFkYWJpbGl0eS5zYXZlVXNlclByZWZlcmVuY2VzKHsnZm9udFNpemUnOiBzaXplfSk7CgogICAgICBwbHVzQnV0dG9uLmRpc2FibGVkID0gc2l6ZSA9PT0gTUFYX1NJWkU7CiAgICAgIG1pbnVzQnV0dG9uLmRpc2FibGVkID0gc2l6ZSA9PT0gTUlOX1NJWkU7CiAgICB9CgogICAgLy8gVXBkYXRlIHRoZW1lIGZyb20gc2VsZWN0b3IuCiAgICBwbHVzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgIGxvZygnYWRkTGlzdGVuZXJzRm9yUGFnZVNpemUgLT4gcGx1cyBjbGljaycpOwoKICAgICAgaWYgKHNpemUgPj0gTUFYX1NJWkUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2l6ZSsrOwogICAgICB1cGRhdGVBdHRyaWJ1dGVBbmREaXNhYmxlU2l6ZUJ1dHRvbnMoKTsKICAgIH0pOwogICAgbWludXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JQYWdlU2l6ZSAtPiBtaW51cyBjbGljaycpOwoKICAgICAgaWYgKHNpemUgPD0gTUlOX1NJWkUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc2l6ZS0tOwogICAgICB1cGRhdGVBdHRyaWJ1dGVBbmREaXNhYmxlU2l6ZUJ1dHRvbnMoKTsKICAgIH0pOwogICAgdXBkYXRlQXR0cmlidXRlQW5kRGlzYWJsZVNpemVCdXR0b25zKCk7CgogICAgbG9nKCdDb21wbGV0ZSBhZGRMaXN0ZW5lcnNGb3JQYWdlU2l6ZScpOwogIH0KCiAgZnVuY3Rpb24gYWRkTGlzdGVuZXJzRm9yUGFnZVRoZW1lKGluaXRpYWxUaGVtZSkgewogICAgbG9nKCdFbnRlciBhZGRMaXN0ZW5lcnNGb3JQYWdlVGhlbWUgd2l0aCBpbml0aWFsIHRoZW1lOiAnICsgaW5pdGlhbFRoZW1lKTsKCiAgICAvKioKICAgICAqIEB0eXBlIHtBcnJheS48SFRNTElucHV0RWxlbWVudD59CiAgICAgKi8KICAgIGNvbnN0IHRoZW1lUmFkaW8gPSBBcnJheS5mcm9tKAogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyN0aGVtZS1idXR0b25zIGlucHV0JykpOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigKICAgICAgICAnI3RoZW1lLWJ1dHRvbnMgW25hbWU9InRoZW1lLXJhZGlvIl1bdmFsdWU9JyArIGluaXRpYWxUaGVtZSArICddJywKICAgICkuY2hlY2tlZCA9IHRydWU7CgogICAgZnVuY3Rpb24gdXBkYXRlQXR0cmlidXRlKCkgewogICAgICBsb2coJ2FkZExpc3RlbmVyc0ZvclBhZ2VUaGVtZSAtPiB1cGRhdGVBdHRyaWJ1dGUnKTsKCiAgICAgIGNvbnN0IGNoZWNrZWRSYWRpbyA9IHRoZW1lUmFkaW8uZmluZChyYWRpbyA9PiByYWRpby5jaGVja2VkKTsKICAgICAgY29uc3QgdmFsdWUgPSBjaGVja2VkUmFkaW8gPyBjaGVja2VkUmFkaW8udmFsdWUgOiAnJzsKICAgICAgZG9jdW1lbnQuYm9keS5zZXRBdHRyaWJ1dGUoJ3RoZW1lJywgdmFsdWUpOwogICAgICB5YW5kZXgucmVhZGFiaWxpdHkuc2F2ZVVzZXJQcmVmZXJlbmNlcyh7J3RoZW1lJzogdmFsdWV9KTsKICAgIH0KCiAgICBmb3IgKGNvbnN0IHJhZGlvIG9mIHRoZW1lUmFkaW8pIHsKICAgICAgcmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdXBkYXRlQXR0cmlidXRlKTsKICAgIH0KICAgIHVwZGF0ZUF0dHJpYnV0ZSgpOwoKICAgIGxvZygnQ29tcGxldGUgYWRkTGlzdGVuZXJzRm9yUGFnZVRoZW1lJyk7CiAgfQoKICBmdW5jdGlvbiBhZGRMaXN0ZW5lcnNGb3JQYWdlRm9udChpbml0aWFsRm9udCkgewogICAgbG9nKCdFbnRlciBhZGRMaXN0ZW5lcnNGb3JQYWdlVGhlbWUgd2l0aCBpbml0YWwgZm9udDogJyArIGluaXRpYWxGb250KTsKCiAgICAvKioKICAgICAqIEB0eXBlIHtBcnJheS48SFRNTElucHV0RWxlbWVudD59CiAgICAgKi8KICAgIGNvbnN0IGZvbnRSYWRpbyA9IEFycmF5LmZyb20oCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2ZvbnQtc2VsZWN0IGlucHV0W3R5cGU9InJhZGlvIl0nKSk7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKAogICAgICAgICcjZm9udC1zZWxlY3QgW25hbWU9ImZvbnQtcmFkaW8iXVt2YWx1ZT0nICsKICAgICAgICBpbml0aWFsRm9udC50b0xvd2VyQ2FzZSgpICsgJ10nKS5jaGVja2VkID0gdHJ1ZTsKICAgIC8qKgogICAgICogQHR5cGUge0VsZW1lbnR9CiAgICAgKi8KICAgIGNvbnN0IGZvbnRTZWxlY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9udC1zZWxlY3QnKTsKICAgIC8qKgogICAgICogQHR5cGUge0VsZW1lbnR9CiAgICAgKi8KICAgIGNvbnN0IGZvbnRTZWxlY3RDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2ZvbnQtc2VsZWN0LWNhcHRpb24nKTsKICAgIC8qKgogICAgICogQHR5cGUge0VsZW1lbnR9CiAgICAgKi8KICAgIGNvbnN0IGZvbnRTZWxlY3REcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb250LXNlbGVjdC1kcm9wZG93bicpOwoKICAgIGZ1bmN0aW9uIGdldENoZWNrZWRSYWRpbygpIHsKICAgICAgcmV0dXJuIGZvbnRSYWRpby5maW5kKHJhZGlvID0+IHJhZGlvLmNoZWNrZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUF0dHJpYnV0ZSgpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JQYWdlVGhlbWUgLT4gdXBkYXRlQXR0cmlidXRlJyk7CgogICAgICBjb25zdCBjaGVja2VkUmFkaW8gPSBnZXRDaGVja2VkUmFkaW8oKTsKICAgICAgY29uc3QgY2hlY2tlZExhYmVsID0gY2hlY2tlZFJhZGlvID8KICAgICAgICAgIGZvbnRTZWxlY3QucXVlcnlTZWxlY3RvcignbGFiZWxbZm9yPSInICsgY2hlY2tlZFJhZGlvLmlkICsgJyJdJykgOgogICAgICAgICAgbnVsbDsKICAgICAgY29uc3QgdmFsdWUgPSBjaGVja2VkUmFkaW8gPyBjaGVja2VkUmFkaW8udmFsdWUgOiAnJzsKICAgICAgY29uc3QgdGV4dCA9IGNoZWNrZWRMYWJlbCA/IGNoZWNrZWRMYWJlbC50ZXh0Q29udGVudCA6ICcnOwogICAgICBmb250U2VsZWN0Q2FwdGlvbi50ZXh0Q29udGVudCA9IHRleHQ7CiAgICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdmb250JywgdmFsdWUpOwogICAgICB5YW5kZXgucmVhZGFiaWxpdHkuc2F2ZVVzZXJQcmVmZXJlbmNlcyh7J2ZvbnROYW1lJzogdmFsdWV9KTsKICAgIH0KCiAgICBmb3IgKGNvbnN0IHJhZGlvIG9mIGZvbnRSYWRpbykgewogICAgICByYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB1cGRhdGVBdHRyaWJ1dGUpOwogICAgfQogICAgdXBkYXRlQXR0cmlidXRlKCk7CgogICAgLyoqCiAgICAgKiBAcGFyYW0gez9ib29sZWFufSBvcHRfdmFsdWUKICAgICAqLwogICAgZnVuY3Rpb24gdG9nZ2xlT3BlbihvcHRfdmFsdWUpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JQYWdlRm9udCAtPiB0b2dnbGVPcGVuJyk7CgogICAgICBpZiAodHlwZW9mIG9wdF92YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBvcHRfdmFsdWUgPSAhZm9udFNlbGVjdC5oYXNBdHRyaWJ1dGUoJ29wZW4nKTsKICAgICAgfQoKICAgICAgaWYgKG9wdF92YWx1ZSkgewogICAgICAgIGZvbnRTZWxlY3Quc2V0QXR0cmlidXRlKCdvcGVuJywgJycpOwogICAgICB9IGVsc2UgewogICAgICAgIGZvbnRTZWxlY3QucmVtb3ZlQXR0cmlidXRlKCdvcGVuJyk7CiAgICAgIH0KCiAgICAgIGZvbnRTZWxlY3QuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ29wZW5DaGFuZ2UnLCB7CiAgICAgICAgYnViYmxlOiBmYWxzZSwKICAgICAgICBjYW5jZWxsYWJsZTogZmFsc2UsCiAgICAgIH0pKTsKICAgIH0KCiAgICBmb250U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JQYWdlRm9udCAtPiBmb250U2VsZWN0IGNsaWNrJyk7CgogICAgICBpZiAoIWV2ZW50LmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKGZvbnRTZWxlY3REcm9wZG93bikpIHsKICAgICAgICB0b2dnbGVPcGVuKHRydWUpOwogICAgICB9CiAgICB9KTsKICAgIGZvbnRTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgIGxvZygnYWRkTGlzdGVuZXJzRm9yUGFnZUZvbnQgLT4gZm9udFNlbGVjdCBrZXlkb3duJyk7CgogICAgICBjb25zdCBjaGVja2VkUmFkaW8gPSBnZXRDaGVja2VkUmFkaW8oKTsKICAgICAgbGV0IHJhZGlvVG9DaGVjazsKICAgICAgc3dpdGNoIChldmVudC5rZXkpIHsKICAgICAgICBjYXNlICdFbnRlcic6CiAgICAgICAgICB0b2dnbGVPcGVuKCk7CiAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ0Fycm93VXAnOgogICAgICAgICAgcmFkaW9Ub0NoZWNrID0gZm9udFJhZGlvW2ZvbnRSYWRpby5pbmRleE9mKGNoZWNrZWRSYWRpbykgLSAxXTsKICAgICAgICAgIGlmIChyYWRpb1RvQ2hlY2spIHsKICAgICAgICAgICAgcmFkaW9Ub0NoZWNrLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICB1cGRhdGVBdHRyaWJ1dGUoKTsKICAgICAgICAgIH0KICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdBcnJvd0Rvd24nOgogICAgICAgICAgcmFkaW9Ub0NoZWNrID0gZm9udFJhZGlvW2ZvbnRSYWRpby5pbmRleE9mKGNoZWNrZWRSYWRpbykgKyAxXTsKICAgICAgICAgIGlmIChyYWRpb1RvQ2hlY2spIHsKICAgICAgICAgICAgcmFkaW9Ub0NoZWNrLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICB1cGRhdGVBdHRyaWJ1dGUoKTsKICAgICAgICAgIH0KICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgbG9nKCdhZGRMaXN0ZW5lcnNGb3JQYWdlVGhlbWUgLT4gd2luZG93IGNsaWNrJyk7CgogICAgICBpZiAoIWZvbnRTZWxlY3QuaGFzQXR0cmlidXRlKCdvcGVuJykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRvZ2dsZU9wZW4oZmFsc2UpOwogICAgfSwge2NhcHR1cmU6IHRydWV9KTsKCiAgICBsb2coJ0NvbXBsZXRlIGFkZExpc3RlbmVyc0ZvclBhZ2VUaGVtZScpOwogIH0KCiAgZnVuY3Rpb24gSW5pdChwYXJhbXMpIHsKICAgIGFkZExpc3RlbmVyc0Zvck1vdXNlbGVzcygpOwogICAgYWRkTGlzdGVuZXJzRm9yQ2xvc2VCdXR0b24oKTsKICAgIGFkZExpc3RlbmVyc0ZvclRvb2xiYXJWaXNpYmlsaXR5KCk7CiAgICBhZGRMaXN0ZW5lcnNGb3JQYWdlU2l6ZShwYXJhbXNbJ2ZvbnRTaXplJ10pOwogICAgYWRkTGlzdGVuZXJzRm9yUGFnZVRoZW1lKHBhcmFtc1sndGhlbWUnXSk7CiAgICBhZGRMaXN0ZW5lcnNGb3JQYWdlRm9udChwYXJhbXNbJ2ZvbnROYW1lJ10pOwoKICAgIGxvZygnSW5pdCBjb21wbGV0ZScpOwogIH0KICBpZiAoREVCVUcpIHsKICAgIGRvY3VtZW50LmJvZHkuc2V0QXR0cmlidXRlKCdkZWJ1ZycsICcnKTsKICB9CgogIHlhbmRleC5yZWFkYWJpbGl0eS5nZXRVc2VyUHJlZmVyZW5jZXMoSW5pdCk7Cn0pKCk7Cg==" type="text/javascript"></script></body>